---
layout: single
title: "내일배움캠프 78일차 8/05 TIL + 유닛 딕셔너리 추가"
permalink: /2024/08/05/TIL/
tags: [TIL, 내일배움캠프, 스파르타내일배움캠프, 스파르타내일배움캠프TIL, Unity]
---
# 작업 내용
## 기존 코드 수정
기존에 DataManager에서는 스테이지 진행 도중에 데이터를 저장하려고 했는데, 이제는 스테이지 갯수를 늘리고 대신 스테이지당 웨이브를 줄여 앵그리버드같이 진행하기로 하였기에 스테이지가 끝나고 나서 저장해도 문제가 없어졌다.  
그래서 DataManager에서 관리하던 데이터를 수정했다.  
```
    // 유닛 SO 모음
    public UnitStatData[] UnitSO;

    // 적 SO 모음
    public EnemyStatData[] EnemySO;

    // 씬 이동용 볼륨 값
    public float masterVolume;
    public float bgmVolume;
    public float sfxVolume;

    // 해금된 유닛 ID 
    public List<int> UserUnitIDs;

    // 스테이지 클리어 정보
    public StageData[] StageDatas = new StageData[3];
```
관리하는 데이터들은 이렇고 이걸 기반으로 SO를 여기저기서 저장해서 쓰던 방식 대신 이 매니저에서 받아서 쓰게 팀원들이 코드를 바꾸도록 필수 구현이 끝나면 고쳐달라 해야겠다.  
추가로 기존에는 여기저기서 상수나 Tag, Layer값을 직접 적어서 썼는데 한번에 모으는 방법을 찾았다 :  
```
public static class Constants
{
    // 태그 이름
    public static class Tags
    {
        public const string Player = "Player";
        public const string Enemy = "Enemy";
        // 여기에 다른 태그들을 추가
    }

    // 레이어 이름
    public static class Layers
    {
        public const string Default = "Default";
        public const string TransparentFX = "TransparentFX";
        public const string IgnoreRaycast = "IgnoreRaycast";
        public const string Water = "Water";
        public const string UI = "UI";
        // 여기에 다른 레이어들을 추가
    }

    // 씬 이름
    public static class Scenes
    {
        public const string MainScene = "MainScene";
        public const string GameScene = "GameScene";
        public const string TutorialScene = "TutorialScene";
        public const string StageChoiceScene = "StageChoiceScene";
        public const string UnitDictionary = "UnitDictionary";
        // 여기에 다른 씬 이름들을 추가
    }

    // 기타 상수
    public static class GameSettings
    {
        // 게임 처음 할 경우 세팅 값
        // 사용 가능한 유닛 ID 목록
        public static readonly List<int> InitialUsableUnitIDs = new List<int>()
        {
            0, 1, 2, 3, 4
        };
        // 스테이지 세팅 정보
        public static readonly StageData[] InitialStageDatas = new StageData[3]
        {
            new StageData { Clear = false, Stars = 0 },
            new StageData { Clear = false, Stars = 0 },
            new StageData { Clear = false, Stars = 0 }
        };

        // 여기에 다른 게임 설정 상수들을 추가
    }
}
```
static 클래스에 서브 클래스로 종류 별로 나누어서 쓰면 되는 것이었다. 이전에도 static 클래스에 상수를 저장할 생각은 했지만 이렇게 다양한 종류를 구분시키는 방법으로 서브 클래스를 쓸 생각을 못했다. 그러다가 이 방법을 찾았다.  
## 유닛 딕셔너리 제작
![스크린샷 2024-08-05 194214](https://github.com/user-attachments/assets/57db2397-b194-43a3-b8be-25f7f779778f)  
화면처럼 유닛들을 보여주는 유닛 사전을 만들었다. 이 중 해금된 애들만 클릭이 가능하고 나머지는 스테이지를 클리어한 보상으로 키를 받으면 해금 할 수 있게 해줄 생각이다.  
그리고 게임에서는 이제부터 해금된 유닛만 쓰게 해줄 생각이다.  
아직은 제작 중인 내용이다.  

# 마무리
오늘은 이런 저런 코드 수정과 새로운 유닛 사전 제작을 하였다. 앞으로는 유닛 사전을 플레이어유닛 사전과 적 유닛 사전을 만들어서 적 유닛은 만난 유닛만 표시해주고 나머지는 검은색으로 가려둘 생각이다. 그리고 유닛을 사전에서 클릭하면 구체적인 스탯에 대한 정보를 표시해줄 것이다. 우선은 그전에 스테이지를 끝내면 열쇠를 주는 시스템을 만들고 열쇠로 유닛을 해금하고, 기존에는 인스펙터창에서 등록해준 인 게임 사용 가능 유닛 대신 해금된 유닛 목록을 기준으로 사용할 수 있게 해주어야한다.
